import{d as Y,l as w,r as _,o as i,c,g as o,w as s,T as $,F as p,e as n,h as k,i as y,a as x,n as D,f as E,A as L,t as h,_ as M}from"./index-BzskY33X.js";import{u as O}from"./query-results-DSvhyGAo.js";import{u as Q}from"./vampire-squid-DGmaUsKL.js";const j=["href"],H=["src"],J=Y({__name:"ResultsImageGridView",setup(K){const C=O().annotations,V=w(()=>C.filter(e=>e.images&&e.images.length>0)),a=_(null),S=_(0),b=_(0),d=_(4),B=w(()=>12/d.value),I=Q();function q(e,t){e&&(a.value=e,S.value=t.clientX,b.value=t.clientY)}function z(){a.value=null}function R(e){return e.split(".").pop()}function P(e){return e.video_sequence_name?e.video_sequence_name:e.camera_platform?e.camera_platform:e.video_name?e.video_name:e.chief_scientist?e.chief_scientist:e.camera_platform??""}function T(e,t){var r;return((r=e.url)==null?void 0:r.localeCompare(t.url??""))??0}function A(e){e.video_uri&&e.index_recorded_timestamp&&I.api.findPreviewMediaByUriAndTimestamp(e.video_uri,e.index_recorded_timestamp).then(t=>{var r;if(t.media&&t.media.uri){const u=t.seekTimeSeconds??0,v=`${t.media.uri}#t=${u}`;(r=window.open(v,"_blank"))==null||r.focus()}})}return(e,t)=>{const r=n("router-link"),u=n("v-col"),v=n("v-select"),g=n("v-row"),N=n("v-img"),U=n("v-lazy"),F=n("v-icon"),G=n("v-card-text"),X=n("v-card");return i(),c(p,null,[o(g,null,{default:s(()=>[o(u,null,{default:s(()=>[o(r,{to:"/results-table-view"},{default:s(()=>t[1]||(t[1]=[k("Back to results table")])),_:1})]),_:1}),o(u,{cols:"2"},{default:s(()=>[o(v,{label:"Images per row",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=l=>d.value=l),items:[1,2,3,4,6]},null,8,["modelValue"])]),_:1})]),_:1}),o(g,null,{default:s(()=>[(i(!0),c(p,null,y(V.value,l=>(i(),E(u,{key:l.row??1,class:"d-flex child-flex",cols:B.value},{default:s(()=>[o(X,{title:P(l),subtitle:l.index_recorded_timestamp??""},{default:s(()=>[o(U,null,{default:s(()=>[o(N,{src:l.image,"lazy-src":l.image,class:L({"highlight-overlay":a.value&&a.value!==l.image}),width:"500px","aspect-ratio":"1",contain:"",onClick:m=>q(l.image,m)},null,8,["src","lazy-src","class","onClick"])]),_:2},1024),o(G,null,{default:s(()=>{var m;return[x("span",null,h(l.concept)+" | ",1),o(F,{size:"small",onClick:()=>A(l)},{default:s(()=>t[2]||(t[2]=[k("mdi-video")])),_:2},1032,["onClick"]),(i(!0),c(p,null,y((m=l.images)==null?void 0:m.sort(T),f=>(i(),c("a",{key:f.url,href:f.url,target:"_blank"},h(R(f.url??".unknown")),9,j))),128))]}),_:2},1024)]),_:2},1032,["title","subtitle"])]),_:2},1032,["cols"]))),128))]),_:1}),o($,null,{default:s(()=>[a.value?(i(),c("div",{key:0,class:"image-preview",onClick:z},[x("img",{src:a.value,alt:"Preview"},null,8,H)])):D("",!0)]),_:1})],64)}}}),le=M(J,[["__scopeId","data-v-c1593812"]]);export{le as default};
